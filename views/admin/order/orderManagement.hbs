<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<body>
    <div class="container mt-5">
        <h2>Order Management <small>Organic</small></h2>

        {{#if success}}
        <div class="alert alert-success">
            {{success}}
        </div>
        {{/if}}
        {{#if error}}
        <div class="alert alert-danger">
            {{error}}
        </div>
        {{/if}}

        <div class="table-responsive" style="font-size: 75%;">
            <table class="table table-bordered">
                <thead class="thead-light">
                    <tr>
                        <th>Order ID</th>
                        <th>Ordered Date</th>
                        <th>User</th>
                        <th>Total Amount</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each Orders}}
                    <tr>
                        <td><a href="/admin/orderDetails/{{this._id}}">{{this.newOrderId}}</a>
                        </td>
                        <td class="order-date">{{this.orderDate}}</td>
                        <td>{{this.userId.email}}</td>
            <td>Rs{{this.totalAmount}}</td>
            <td>
                <select class="order-status" data-order-id="{{this._id}}">
                    {{#if (isEqual this.orderStatus 'Cancelled')}}disabled{{/if}}
                    <option value="Pending" {{#if (isEqual this.orderStatus 'Pending')}}selected{{/if}}>Pending</option>
                    <option value="Confirmed" {{#if (isEqual this.orderStatus 'Confirmed')}}selected{{/if}}>Confirmed</option>
                    <option value="Processing" {{#if (isEqual this.orderStatus 'Processing')}}selected{{/if}}>Processing</option>
                    <option value="Completed" {{#if (isEqual this.orderStatus 'Completed')}}selected{{/if}}>Completed</option>
                    <option value="Cancelled" {{#if (isEqual this.orderStatus 'Cancelled')}}selected{{/if}}>Cancelled</option>
                    <option value="Return" {{#if (isEqual this.orderStatus 'Return')}}selected{{/if}}>Return</option>
                </select>
            </td>
            <td>
                {{#if (isEqual this.orderStatus 'Cancelled')}}
                    <button class="btn btn-secondary btn-sm cancel-order" disabled>Cancelled</button>
                    {{else}}
                        <button class="btn btn-danger btn-sm cancel-order" data-order-id="{{this._id}}">Cancel Order</button>
                    {{/if}}
            </td>
        </tr>
        {{/each}}
    </tbody>
</table>
</div>
<!-- Pagination Section -->
        <div class="pagination-container d-flex flex-row align-items-center justify-content-between mt-4">
            <div class="pagination-summary text-primary">
                Page {{ currentPage }} of {{ totalPages }}
            </div>
            <div class="pagination-links d-flex flex-row align-items-center gap-3">
                {{#if (gt currentPage 1)}}
                <a href="/admin/orderManage?page={{ subtract currentPage 1 }}" class="pagination-link text-primary">Previous</a>
                {{/if}}
                {{#if (lt currentPage totalPages)}}
                <a href="/admin/orderManage?page={{ add currentPage 1 }}" class="pagination-link text-primary">Next</a>
                {{/if}}
            </div>
        </div>
<script src="/javascripts/orderManagement.js"></script>

    </body>