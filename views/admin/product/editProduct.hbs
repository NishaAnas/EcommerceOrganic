<link rel="stylesheet" href="/stylesheets/editproduct.css">
<body>
    <div class="container">
        <div
            class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2">Editing: {{ productDetailsViewing.name }}</h1>
            {{#if error}}
            <div class="alert alert-danger">
                {{error}}
            </div>
            {{/if}}
            {{#if success}}
            <div class="alert alert-success">
                {{success}}
            </div>
            {{/if}}
            <div class="btn-toolbar mb-2 mb-md-0">
                <div class="btn-group me-2">
                    <button class="btn btn-sm btn-outline-secondary">?</button>
                </div>
            </div>
        </div>
        <div class="col py-3">
            <div class="row">
                <div class="col">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a
                                    href="/admin/product">Product
                                    Management</a></li>
                            <li
                                class="breadcrumb-item active">{{productDetailsViewing.title}}</li>
                        </ol>
                    </nav>
                </div>
                <div class="col text-end fw-lighter">
                    <b>Product ID:</b> {{ productDetailsViewing._id }}
                </div>
            </div>
        </div>
        <form
            action="/admin/editProduct/{{productDetailsViewing._id}}?_method=PUT"
            method="POST" enctype="multipart/form-data">
            <div class="row form-group mb-4 p-3 gap-4">
                <div class="col">
                    <label for="sku"><b>Product SKU</b></label>
                    <input type="text" class="form-control" id="sku"
                        name="sku"
                        value="{{productDetailsViewing.sku }}" sku
                        placeholder="sku" required>
                </div>
                <div class="row form-group mb-4 p-3 gap-4">
                    <div class="col">
                        <label for="producttitle"><b>Product Title</b></label>
                        <input type="text" class="form-control"
                            id="producttitle"
                            name="producttitle"
                            value="{{productDetailsViewing.title }}"
                            placeholder="product Title" required>
                    </div>
                    <div class="row form-group mb-4 p-3 gap-4">
                        <div class="col">
                            <label for="productPrice"><b>Product
                                    Price</b></label>
                            <input type="text" class="form-control"
                                id="productPrice"
                                name="productPrice"
                                value="{{productDetailsViewing.price}}"
                                placeholder="product Price" required>
                        </div>
                        <div class="row form-group mb-4 p-3 gap-4">
                            <div class="col">
                                <label
                                    for="category Name"><b>Category</b></label>
                                <select id="categoryId" name="categoryId"
                                    class="form-select" required>
                                    {{#each productCategory}}
                                    <option value="{{this._id}}" {{#isEqual
                                        this._id
                                        productDetailsViewing.categoryId}}selected{{/isEqual}}>{{this.name}}</option>
                                    {{/each}}
                                </select>
                            </div>
                            <div class="row form-group">
                                <div class="col">
                                    <label for="productDetails"><b>product
                                            Details</b></label>
                                    <textarea class="form-control mt-3"
                                        name="productDetails"
                                        id="productDetails"
                                        placeholder="product Details" rows="4"
                                        value="{{productDetailsViewing.description}}"></textarea>
                                </div>
                            </div>
                            <div
                                class="d-flex flex-row align-items-center justify-content-evenly">
                                <div class="row form-group">
                                    <div class="col">
                                        <label for="isActive"
                                            class="col-sm-2 col-form-check-label">isActive:</label>
                                        <div
                                            class="col-sm-10 form-check form-switch"
                                            style="padding-left: 4.5em;">
                                            <input class="form-check-input"
                                                name="isActive" type="checkbox"
                                                role="switch" id="isActive"
                                                {{#if
                                                productDetailsViewing.isActive}}checked{{/if}}
                                                style="min-height: 70%;">
                                        </div>
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col">
                                        <label for="isDeleted"
                                            class="col-sm-2 col-form-check-label">isDeleted:</label>
                                        <div
                                            class="col-sm-10 form-check form-switch"
                                            style="padding-left: 4.5em;">
                                            <input class="form-check-input"
                                                name="isDeleted" type="checkbox"
                                                role="switch" id="isDeleted"
                                                {{#if
                                                productDetailsViewing.isDeleted}}checked{{/if}}
                                                style="min-height: 70%;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                                <div class="container mt-3 w-100 py-4">
                                    <div class="card shadow-sm w-100">
                                        <div class="card-header d-flex justify-content-between">
                                            <h4>Upload Images</h4>
                                            <form action="#" class="form" id="form">
                                                <input type="file" name="image" id="product-image" multiple class="d-none" onchange="image_select()">
                                                <button class="btn btn-sm btn-primary" type="button"
                                                onclick="document.getElementById('product-image').click()"> Choose Images
                                            </button>
                                            </form>
                                        </div>
                                         <div class="card-body d-flex flex-wrap justify-content-start" id="container">
                                            {{#each productDetailsViewing.images}}
                                            <div class="image-container d-flex justify-content-around postion-absolute">
                                                <img src="/{{ this }}" alt="Product Image">
                                            </div>
                                    {{/each}}
                                         </div>
                                    </div>
                                </div>
                            <div class="form-group mb-4 d-flex flex-row align-items-center justify-content-evenly">
                                <button type="submit"class="btn btn-primary">Update Product</button>
                            </div>
                        </form>
                    </div>
                     <script src="/javascripts/editProduct.js"></script>
                </body>