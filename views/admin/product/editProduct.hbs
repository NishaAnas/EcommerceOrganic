<body>
    <div
        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Editing: {{ productDetailsViewing.name }}</h1>
        {{#if error}}
        <div class="alert alert-danger" role="alert">
            {{error}}
        </div>
        {{/if}}
        {{#if success}}
        <div class="alert alert-success" role="alert">
            {{success}}
        </div>
        {{/if}}
        <div class="btn-toolbar mb-2 mb-md-0">
            <div class="btn-group me-2">
                <button class="btn btn-sm btn-outline-secondary">?</button>
            </div>
        </div>
    </div>
    <div class="col py-3">
        <div class="row">
            <div class="col">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a
                                href="/admin/product">Product
                                Management</a></li>
                        <li
                            class="breadcrumb-item active">{{productDetailsViewing.title}}</li>
                    </ol>
                </nav>
            </div>
            <div class="col text-end fw-lighter">
                <b>Product ID:</b> {{ productDetailsViewing._id }}
            </div>
        </div>
    </div>
    <form action="/admin/editProduct/{{productDetailsViewing._id}}?_method=PUT"
        method="POST" enctype="multipart/form-data">
        <div class="row form-group mb-4 p-3 gap-4">
            <div class="col">
                <label for="sku"><b>Product<br>SKU</b></label>
                <input type="text" class="form-control" id="sku"
                    name="sku"
                    value="{{productDetailsViewing.sku }}" sku
                    placeholder="sku" required>
            </div>
            <div class="row form-group mb-4 p-3 gap-4">
                <div class="col">
                    <label for="producttitle"><b>Product Title</b></label>
                    <input type="text" class="form-control" id="producttitle"
                        name="producttitle"
                        value="{{productDetailsViewing.title }}"
                        placeholder="product Title" required>
                </div>
                <div class="row form-group mb-4 p-3 gap-4">
                    <div class="col">
                        <label for="productPrice"><b>Product Price</b></label>
                        <input type="text" class="form-control"
                            id="productPrice"
                            name="productPrice"
                            value="{{productDetailsViewing.price}}"
                            placeholder="product Price" required>
                    </div>
                    <div class="row form-group mb-4 p-3 gap-4">
                        <div class="col">
                            <label for="images"><b>Product Images</b></label>
                            <div id="imgPreview"
                                class="position-relative m-auto"
                                style="width: 90%;"></div>
                            <input type="file" name="images"
                                class="form-control"
                                onchange="getImagePreview(event)"
                                accept="image/*" multiple>
                        </div>
                        <div class="row form-group mb-4 p-3 gap-4">
                            <div class="col">
                                <!-- Display existing images for reference -->
                                {{#each productDetailsViewing.images}}
                                <div class="col-4">
                                    <img style="width: 100px; height: 100px;"
                                        src="/{{ this }}" alt="Product Image"
                                        class="img-fluid">
                                </div>
                                {{/each}}
                            </div>
                        </div>
                    </div>
                    <div class="row form-group mb-4 p-3 gap-4">
                        <div class="col">
                            <label for="category Name"><b>Category</b></label>
                            <select id="categoryId" name="categoryId"
                                class="form-select" required>
                                {{#each productCategory}}
                                <option value="{{this._id}}" {{#isEqual this._id
                                    productDetailsViewing.categoryId}}selected{{/isEqual}}>{{this.name}}</option>
                                {{/each}}
                            </select>
                        </div>
                        <div class="row form-group">
                            <div class="col">
                                <label for="productDetails"><b>product
                                        Details</b></label>
                                <input type="text" class="form-control"
                                    id="productDetails"
                                    name="productDetails"
                                    value="{{productDetailsViewing.description}}"
                                    placeholder="product Details" required>
                            </div>
                        </div>
                        <div
                            class="d-flex flex-row align-items-center justify-content-evenly">
                            <div class="row form-group">
                                <div class="col">
                                    <label
                                        for="isActive"><b>isActive</b></label>
                                    <input type="text" class="form-control"
                                        id="isActive"
                                        name="isActive"
                                        value="{{productDetailsViewing.isActive}}"
                                        placeholder="isActive" required>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col">
                                    <label
                                        for="isDeleted"><b>isDeleted</b></label>
                                    <input type="text" class="form-control"
                                        id="isDeleted"
                                        name="isDeleted"
                                        value="{{productDetailsViewing.isDeleted }}"
                                        placeholder="isDeleted" required>
                                </div>
                            </div>
                        </div>
                        <div
                            class="form-group mb-4 d-flex flex-row align-items-center justify-content-evenly">
                            <button type="submit" class="btn btn-primary"
                                onclick="return validateForm(event)">Update
                                Product</button>
                            <button type="button" class="btn btn-danger"
                                data-bs-toggle="modal"
                                id="deleteButton"
                                data-bs-target="#deleteModal">Delete
                                Product</button>
                        </div>
                    </form>
                    {{!-- //Deleting Data from the database --}}
                    <div class="modal fade" tabindex="-1" role="dialog"
                        id="deleteModal">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <div class="modal-title">You are about to
                                        remove a Product
                                        record.</div>
                                    <button type="button" class="btn-close"
                                        data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <p>
                                        This will remove the product record of
                                        <b
                                            class="fw-bold">{{productDetailsViewing.title
                                            }}</b><br />
                                        Are you sure?
                                    </p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button"
                                        class="btn btn-secondary"
                                        data-bs-dismiss="modal">Close</button>
                                    <form
                                        action="/admin/deleteProduct/{{productDetailsViewing._id}}?_method=PUT"
                                        method="POST" class="position-relative">
                                        <button type="submit"
                                            class="btn btn-primary">Yes, Remove
                                            Product</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <script src="/javascripts/editProduct.js"></script>

                </body>